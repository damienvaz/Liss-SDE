<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>jsTree test</title>
    <!-- 2 load the theme CSS file -->
    <link rel="stylesheet" href="dist/themes/default/style.css" />
</head>
<body>


<div id="lissSyntax"></div>
<!--<input type="button" value="Load" onclick="loadTreeJSON()"/>-->

<!-- 4 include the jQuery library -->
<script src="dist/libs/jquery.min.js"></script>
<!-- 5 include the minified jstree source -->
<!--<script src="dist/jstree.min.js"></script>-->
<script src="dist/jstree.min.js"></script>
<script>
    var num=0;

    function getStateJson(){
        num = liss.getNum();
    }

    function setStateJson(){
        liss.setStateJsonLiss(num);
    }

    function produceTabs(tab){
        var res = "";
        for (i = 0; i < tab; i++) {
            res +=  "    ";
        }
        return res;
    }

    function saveTreeJSON(){
        var v = $('#lissSyntax').jstree(true).get_json('#', {flat:true});
        setStateJson();
        var num = ""+liss.getNum();
        var mytext = JSON.stringify(v);
        mytext = num+"\n"+mytext;
        return mytext;
    }

    function loadTreeJSON(){
        var test = liss.getJSON();

        var json = JSON.parse(test);
        if($('#lissSyntax').jstree(true)){
            $('#lissSyntax').jstree(true).settings.core.data = json;
            $('#lissSyntax').jstree(true).refresh();
            //$('#lissSyntax').jstree(true).open_all($('#lissSyntax'));
            liss.setText(getProgramLissBeta());
        }
    }

    function getProgramLissBeta(){
        var res="";
        var jsonObj = $('#lissSyntax').jstree(true).get_json('#', {flat:true});
        liss.debugger("[");
        for(var i=0; i<jsonObj.length; i++) {
            var node = $("#lissSyntax").jstree(this).get_node(jsonObj[i].id);
            var arrayClassName = jsonObj[i].a_attr.class.split(" ");
            liss.debugger("ArrayClassName [SIZE]:"+arrayClassName.length);
            var tab = jsonObj[i].a_attr.tab;
            if (arrayClassName[0] === "terminal") {
                liss.debugger("NODE_T: "+node.id+" TAB: "+node.a_attr.tab);
                if (arrayClassName.length >= 2 && arrayClassName.length <= 3 && arrayClassName[1] === "edit") {
                    liss.debugger("NODE_T1: "+node.id+" TAB: "+node.a_attr.tab);
                    var typeOfTerminal = jsonObj[i].a_attr.expressionregularrule;
                    if (typeOfTerminal === "ID" || typeOfTerminal === "NBR") {
                        //var tab = jsonObj[i].a_attr.tab;
                        if (arrayClassName.length === 3 && arrayClassName[2] === "correct") {
                            if(tab === 0) {
                                res += jsonObj[i].text;
                            }else{
                                res += produceTabs(tab) + jsonObj[i].text;
                            }
                        } else {
                            if(tab === 0) {
                                res += jsonObj[i].a_attr.program;
                            }else{
                                res += produceTabs(tab) + jsonObj[i].a_attr.program;
                            }
                        }
                    }
                }else {
                    if(tab === 0) {
                        res += jsonObj[i].a_attr.program;
                    }else{
                        res += produceTabs(tab) + jsonObj[i].a_attr.program;
                    }
                }
            }else{
                //Means that it is a non-terminal
                //liss.debugger("NODE_NT: "+node.id+" POSITION: "+position+" CHILDREN_lENGTH: "+node.children.length);
                liss.debugger("NODE_NT: "+node.id+" TAB: "+node.a_attr.tab);
                if(node.children.length === 0) {
                    res += jsonObj[i].a_attr.program;
                }
            }
        }
        liss.debugger("]");
        return res;
    }

    /*function getProgramLiss(){
        var res="";
        var jsonObj = $('#lissSyntax').jstree(true).get_json('#', {flat:true});
        liss.debugger("[");
        for(var i=0; i<jsonObj.length; i++) {
            var arrayClassName = jsonObj[i].a_attr.class.split(" ");
            if (arrayClassName[0] === "terminal") {
                if (arrayClassName.length <= 3 && arrayClassName[1] === "edit") {
                    if (jsonObj[i].a_attr.expressionregularrule === "ID") {
                        if (arrayClassName.length === 3 && arrayClassName[2] === "correct") {
                            //liss.debugger("TAB: "+jsonObj[i].a_attr.tab);
                            //liss.debugger("|"+jsonObj[i].a_attr.program+"|");
                            res += jsonObj[i].a_attr.program + jsonObj[i].text;
                        } else {
                            res += jsonObj[i].a_attr.program + "undefined";
                        }
                    } else if (jsonObj[i].a_attr.expressionregularrule === "NBR") {
                        if (arrayClassName.length === 3 && arrayClassName[2] === "correct") {
                            res += jsonObj[i].a_attr.program + jsonObj[i].text;
                        } else {
                            res += jsonObj[i].a_attr.program + "undefined";
                        }
                    }

                }
                else {
                    res += jsonObj[i].a_attr.program;
                }
            }else if (arrayClassName[0] === "non-terminal") {
                var nodeParent = $("#lissSyntax").jstree(this).get_node(jsonObj[i].parent);
                var node = $("#lissSyntax").jstree(this).get_node(jsonObj[i].id);
                var positionNodeInParent = function (nodeParent, node) {
                    var res = -1;
                    for (var i = 0; i < nodeParent.children.length; i++) {
                        if (nodeParent.children[i] === node.id) {
                            res = i;
                        }
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent, node);

                liss.debugger("NODE_NT: "+node.id+" POSITION: "+position+" CHILDREN_lENGTH: "+node.children.length);

                if (nonTerminalSpecialBehaviorTestDisplay(node.id)) {
                    liss.debugger("NODE: "+node.id+",TAB: "+node.a_attr.tab+"WOOT2");
                    if(node.children.length === 0) {
                        liss.debugger("NODE: "+node.id+",TAB: "+node.a_attr.tab+"WOOT1");
                        if (patternVar.test(node.id)) {
                            if (position === 0) {
                                res += produceTabs(node.a_attr.tab) + "undefined";
                            } else {
                                //When there is more than one var !
                                res += "undefined";
                            }
                        }else if (patternDeclarations.test(node.id) || patternStatements.test(node.id)) {
                            res += produceTabs(node.a_attr.tab + 1) + "undefined\n";
                        }else if(patternVariableDeclaration.test(node.id) || patternSubprogramDefinition.test(node.id) ||
                                patternStatement.test(node.id)||patternReturnSubProgram.test(node.id)||
                                patternConditionalStatement.test(node.id)||patternIterativeStatement.test(node.id)) {
                            res += produceTabs(node.a_attr.tab) + "undefined\n";
                        }//else if(patternReturnSubProgram.test(node.id)){
                         //   res += produceTabs(node.a_attr.tab) + "undefined\n";
                        //}
                        else if(patternFBody.test(node.id)){
                            res+=" undefined\n";
                        }else if(patternAssignment.test(node.parent)){
                            //if(patternVariable.test(node.id)) {
                                res += produceTabs(node.a_attr.tab) + "undefined";
                            //}
                        }else if(patternMultipleStatement.test(node.parent) ||
                        patternStatement.test(node.parent)){
                            res += produceTabs(node.a_attr.tab) + "undefined";
                        }else{
                            res += "undefined";
                        }
                    }
                    //Others Non-terminal which i want to display "undefined"
                }else if (nonTerminalRegexTestDisplay(node.id)) {
                    if (node.children.length === 0) {
                        //liss.debugger("NODE_PARENT: "+nodeParent.id);
                        //liss.debugger("NODE: "+node.id+" POSITION: "+position);

                        //If the children of the parent node is bigger than 1
                        if(nodeParent.children.length>1){
                            //If our non-terminal isn't in the first position
                            if(position>0){
                                node = $("#lissSyntax").jstree(this).get_node(nodeParent.children[position-1]); //<- might be the problem here houston
                                liss.debugger("NODE_PREVIOUS: "+node.id+" POSITION: "+position+" CHILDREN_lENGTH: "+node.children.length);
                                liss.debugger("CLASS: "+node.a_attr.class);
                                arrayClassName = node.a_attr.class.split(" "); //problem here houston

                                //Then test the previous node and check if it is a terminal
                                if(arrayClassName[0]==="terminal" && arrayClassName.length <= 1) {
                                    res += "undefined";
                                }else{
                                    //If the previous node isn't a terminal then it is a non-terminal
                                    res+= " undefined";
                                }
                            }else{
                                //If the position of the non-terminal is equals to 0
                                res += "undefined";
                            }
                        }else{
                            //If the parent node length is equals to 0 then it means he is unique ( only 1)
                            res += "undefined";
                        }
                    }
                }
            }
        }
        liss.debugger("]\n");
        return res;
    }*/

    $('#lissSyntax').on('mouseenter',function(){ //event optional : click
        var res = getProgramLissBeta();
        liss.setText(res);
    });

    $('#lissSyntax').on("set_text.jstree",function(event,object){
        var id = object.obj.a_attr.id;
        var node = $("#"+id);
        //ID : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9'|'_')* //removi o uso do signal '-' conflitos com os valores do signal
        var patternId = /^([a-z]|[A-Z])([a-z]|[A-Z]|[0-9]|[_])*$/;
        //NBR : ('0'..'9')+
        var patternNbr = /^[0-9]+$/;

        var patternEscSeq = /\\(b|t|n|f|r|"|'|\\)/;
        var patternStr = /".*"/;     // -> /"(\\(b|t|n|f|r|"|'|\\)|[^"])*"/;

        //Pr.C.:Check if the node has an expression regular rule as attribute
        if(node.is("[expressionregularrule]") && node.hasClass("edit")){
            //Pr.C.:Check which type of node is it. (Ex.: NBR|ID|STR)
            if(node.attr("expressionregularrule")==="NBR"){
                //console.log("regra NBR");
                //liss.debugger("regra NBR");
                //Pr.C:When edition is actived, the text element is empty
                if(object.obj.text!=="") {
                    //Pr.C.: Check the regular expression of NBR
                    if (patternNbr.test(object.obj.text)) {
                        if(/warning/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            var s = object.obj.a_attr.class.replace(" warning", "");
                            object.obj.a_attr.class = s;
                            object.obj.a_attr.class+=" correct";
                            //Changing value now for the DOM html document structure
                            node.removeClass("warning");
                            node.addClass("correct");
                        }else if(!/correct/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            object.obj.a_attr.class+=" correct";
                            //Changing value now for the DOM html document structure
                            node.addClass("correct");
                        }
                    } else {
                        if(/correct/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            var s = object.obj.a_attr.class.replace(" correct", "");
                            object.obj.a_attr.class = s;
                            object.obj.a_attr.class+=" warning";
                            //Changing value now for the DOM html document structure
                            node.removeClass("correct");
                            node.addClass("warning");
                        }else if(!/warning/.test(object.obj.a_attr.class)){
                            //Changing value now for the DOM html document structure
                            node.addClass("warning");
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            object.obj.a_attr.class+=" warning";
                        }
                    }
                }
            }else if(node.attr("expressionregularrule")==="ID"){
                console.log("regra ID");
                //liss.debugger("regra ID");
                //Pr.C:When edition is actived, the text element is empty
                if(object.obj.text!=="") {
                    //Pr.C.: Check the regular expression of NBR
                    if (patternId.test(object.obj.text)) {
                        if(/warning/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            var s = object.obj.a_attr.class.replace(" warning", "");
                            object.obj.a_attr.class = s;
                            object.obj.a_attr.class+=" correct";
                            //Changing value now for the DOM html document structure
                            node.removeClass("warning");
                            node.addClass("correct");
                        }else if(!/correct/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            object.obj.a_attr.class+=" correct";
                            //Changing value now for the DOM html document structure
                            node.addClass("correct");
                        }
                    } else {
                        if(/correct/.test(object.obj.a_attr.class)){
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            var s = object.obj.a_attr.class.replace(" correct", "");
                            object.obj.a_attr.class = s;
                            object.obj.a_attr.class+=" warning";
                            //Changing value now for the DOM html document structure
                            node.removeClass("correct");
                            node.addClass("warning");
                        }else if(!/warning/.test(object.obj.a_attr.class)){
                            //Changing value now for the DOM html document structure
                            node.addClass("warning");
                            //Changing value for the jstree structure data because it isn't reflected to the DOM html document
                            object.obj.a_attr.class+=" warning";
                        }
                    }
                    console.log(object.obj.a_attr.class);
                }
            }else if(node.attr("expressionregularrule")==="STR"){
                console.log("regra STR");
                //FAZER ESTA PARTE
            }

        }
    });

    /**************************************************************************/


    $("#lissSyntax").jstree({
        "core": {
            // so that create works
            "themes": {
                "icons": false
            },
            "check_callback": true,
            "data": [{
                "id": "liss", "parent": "#", "text": "liss", a_attr: {"class": "non-terminal", "tab":0,"program":""}
            }]
        },
        "plugins": ["contextmenu"],
        "contextmenu": {
            "items": customMenu
        }
    });

    function nonTerminalSpecialBehaviorTestDisplay(str){
        var res = false;
        switch(true){
            case patternVar.test(str):
                res=true;
                break;
            case patternDeclarations.test(str):
                res=true;
                break;
            case patternStatements.test(str):
                res=true;
                break;
            case patternVariableDeclaration.test(str):
                res=true;
                break;
            case patternSubprogramDefinition.test(str):
                res=true;
                break;
            case patternFBody.test(str):
                res = true;
                break
            case patternReturnSubProgram.test(str):
                res=true;
                break;
            case patternStatement.test(str):
                res = true;
                break;
            case patternAssignment.test(str):
                res = true;
                break;
            case patternWriteStatement.test(str):
                res = true;
                break;
            case patternReadStatement.test(str):
                res = true;
                break;
            case patternConditionalStatement.test(str):
                res = true;
                break;
            case patternIterativeStatement.test(str):
                res = true;
                break;
            case patternFunctionCall.test(str):
                res = true;
                break;
            case patternSuccOrPred.test(str):
                res = true;
                break;
            case patternCopyStatement.test(str):
                res = true;
                break;
            case patternCatStatement.test(str):
                res = true;
                break;
            case patternVariable.test(str):
                res = true;
                break;
            default:
                break;
        }

        return res;
    }

    function nonTerminalRegexTestDisplay(str){
        var res = false;
        switch(true){
            case /^body$/.test(str):
                res = true;
                break;
            case patternVariableDeclaration.test(str):
                res = true;
                break;
            case patternSubprogramDefinition.test(str):
                res = true;
                break;
            case patternType.test(str):
                res = true;
                break;
            case patternDimension.test(str):
                res = true;
                break;
            case patternNumbers.test(str):
                res = true;
                break;
            case patternNumber.test(str):
                res = true;
                break;
            case patternSign.test(str):
                res = true;
                break;
            case patternVars.test(str):
                res = true;
                break;
            case patternAddOp.test(str):
                res = true;
                break;
            case patternMulOp.test(str):
                res = true;
                break;
            case patternRelOp.test(str):
                res = true;
                break;
            case patternVar.test(str):
                res = true;
                break;
            case patternValueVar.test(str):
                res = true;
                break;
            case patternInicVar.test(str):
                res = true;
                break;
            case patternValue.test(str):
                res = true;
                break;
            case patternArrayDefinition.test(str):
                res = true;
                break;
            case patternArrayInitialization.test(str):
                res = true;
                break;
            case patternElems.test(str):
                res = true;
                break;
            case patternElem.test(str):
                res = true;
                break;
            case patternSetDefinition.test(str):
                res = true;
                break;
            case patternSetInitialization.test(str):
                res = true;
                break;
            case patternSequenceDefinition.test(str):
                res = true;
                break;
            case patternSequenceInitialization.test(str):
                res = true;
                break;
            case patternValues.test(str):
                res = true;
                break;
            case patternExpression.test(str):
                res = true;
                break;
            case patternSingleExpressions.test(str):
                res = true;
                break;
            case patternSingleExpression.test(str):
                res = true;
                break;
            case patternTerms.test(str):
                res = true;
                break;
            case patternTerm.test(str):
                res = true;
                break;
            case patternFactors.test(str):
                res = true;
                break;
            case patternFactor.test(str):
                res = true;
                break;
            case patternElemArray.test(str):
                res = true;
                break;
            case patternVariable.test(str):
                res = true;
                break;
            case patternFunctionCall.test(str):
                res = true;
                break;
            case patternArrayAccess.test(str):
                res = true;
                break;
            case patternSubPrgArgs.test(str):
                res = true;
                break;
            case patternArgs.test(str):
                res = true;
                break;
            case patternExpressions.test(str):
                res = true;
                break;
            case patternSpecialFunctions.test(str):
                res = true;
                break;
            case patternTailFunction.test(str):
                res = true;
                break;
            case patternHeadFunction.test(str):
                res = true;
                break;
            case patternConsFunction.test(str):
                res = true;
                break;
            case patternMemberFunction.test(str):
                res = true;
                break;
            case patternIsEmptyFunction.test(str):
                res = true;
                break;
            case patternLengthFunction.test(str):
                res = true;
                break;
            case patternFormalArgs.test(str):
                res = true;
                break;
            case patternFArgs.test(str):
                res = true;
                break;
            case patternFormalsArgs.test(str):
                res = true;
                break;
            case patternFormalArg.test(str):
                res = true;
                break;
            case patternReturnType.test(str):
                res = true;
                break;
            case patternTypeReturnSubProgram.test(str):
                res = true;
                break;
            /*case patternAssignment.test(str):
                res = true;
                break;
            case patternWriteStatement.test(str):
                res = true;
                break;
            case patternReadStatement.test(str):
                res = true;
                break;
            case patternConditionalStatement.test(str):
                res = true;
                break;
            case patternIterativeStatement.test(str):
                res = true;
                break;
            case patternSuccOrPred.test(str):
                res = true;
                break;
            case patternCopyStatement.test(str):
                res = true;
                break;
            case patternCatStatement.test(str):
                res = true;
                break;*/
            default:
                break;
        }
        return res;
    }

    /*function nonTerminalRegexTest(str){
        var res = false;
        switch(true){
            case /^declarations[0-9]+$/.test(str):
                res = true;
                break;
            case /^statements[0-9]+$/.test(str):
                res = true;
                break;
            case /^variables_declarations[0-9]+$/.test(str):
                res = true;
                break;
            case /^variable_declaration[0-9]+$/.test(str):
                res = true;
                break;
            case /^subprograms_definitions[0-9]+$/.test(str):
                res = true;
                break;
            case /^subprogram_definition[0-9]+$/.test(str):
                res = true;
                break;
            case /^type[0-9]+$/.test(str):
                res = true;
                break;
            case /^dimension[0-9]+$/.test(str):
                res = true;
                break;
            case /^numbers[0-9]+$/.test(str):
                res = true;
                break;
            case /^number[0-9]+$/.test(str):
                res = true;
                break;
            case /^sign[0-9]+$/.test(str):
                res = true;
                break;
            case /^vars[0-9]+$/.test(str):
                res = true;
                break;
            case /^var[0-9]+$/.test(str):
                res = true;
                break;
            case /^value_var[0-9]+$/.test(str):
                res = true;
                break;
            case /^inic_var[0-9]+$/.test(str):
                res = true;
                break;
            case /^constant[0-9]+$/.test(str):
                res = true;
                break;
            case /^array_definition[0-9]+$/.test(str):
                res = true;
                break;
            case /^array_initialization[0-9]+$/.test(str):
                res = true;
                break;
            case /^elems[0-9]+$/.test(str):
                res = true;
                break;
            case /^elem[0-9]+$/.test(str):
                res = true;
                break;
            case /^set_definition[0-9]+$/.test(str):
                res = true;
                break;
            case /^set_initialization[0-9]+$/.test(str):
                res = true;
                break;
            case /^sequence_definition[0-9]+$/.test(str):
                res = true;
                break;
            case /^sequence_initialization[0-9]+$/.test(str):
                res = true;
                break;
            case /^values[0-9]+$/.test(str):
                res = true;
                break;
            case /^expression[0-9]+$/.test(str):
                res = true;
                break;
            case /^single_expressions[0-9]+$/.test(str):
                res = true;
                break;
            case /^single_expression[0-9]+$/.test(str):
                res = true;
                break;
            case /^terms[0-9]+$/.test(str):
                res = true;
                break;
            case /^term[0-9]+$/.test(str):
                res = true;
                break;
            case /^factors+[0-9]+$/.test(str):
                res = true;
                break;
            case /^factor[0-9]+$/.test(str):
                res = true;
                break;
            case /^elem_array[0-9]+$/.test(str):
                res = true;
                break;
            case /^designator[0-9]+$/.test(str):
                res = true;
                break;
            case /^function_call[0-9]+$/.test(str):
                res = true;
                break;
            case /^array_access[0-9]+$/.test(str):
                res = true;
                break;
            case /^sub_prg_args[0-9]+$/.test(str):
                res = true;
                break;
            case /^args[0-9]+$/.test(str):
                res = true;
                break;
            case /^expressions[0-9]+$/.test(str):
                res = true;
                break;
            case /^special_functions[0-9]+$/.test(str):
                res = true;
                break;
            case /^tail_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^head_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^cons_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^member_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^is_empty_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^length_function[0-9]+$/.test(str):
                res = true;
                break;
            case /^formal_args[0-9]+$/.test(str):
                res = true;
                break;
            case /^return_type[0-9]+/.test(str):
                res = true;
                break;
            case /^f_body[0-9]+$/.test(str):
                res = true;
                break;
            case /^f_args[0-9]+$/.test(str):
                res = true;
                break;
            case /^formals_args[0-9]+$/.test(str):
                res = true;
                break;
            case /^formal_arg[0-9]+$/.test(str):
                res = true;
                break;
            case /^return_type[0-9]+$/.test(str):
                res = true;
                break;
            case /^type_return_subprogram[0-9]+$/.test(str):
                res = true;
                break;
            case /^return_subprogram[0-9]+$/.test(str):
                res = true;
                break;
            default:
                break;
        }
        return res;
    }*/

    //Regular expression for some node id !!!
    var patternBody = /^body$/;
    var patternName = /^name[0-9]+$/;
    var patternDeclarations=/^declarations[0-9]+$/;
    var patternStatements=/^statements[0-9]+$/;
    var patternVariablesDeclarations = /^variables_declarations[0-9]+$/;
    var patternVariableDeclaration = /^variable_declaration[0-9]+$/;
    var patternSubprogramsDefinitions = /^subprograms_definitions[0-9]+$/;
    var patternSubprogramDefinition = /^subprogram_definition[0-9]+$/;
    var patternType = /^type[0-9]+$/;
    var patternInteger = /^integer[0-9]+$/;
    var patternBoolean = /^boolean[0-9]+$/;
    var patternSet = /^set[0-9]+$/;
    var patternSequence = /^sequence[0-9]+$/;
    var patternArray = /^array[0-9]+$/;
    var patternSize = /^size[0-9]+$/;
    var patternDimension = /^dimension[0-9]+$/;
    var patternNumbers = /^numbers[0-9]+$/;
    var patternNumber = /^number[0-9]+$/;
    var patternSign = /^sign[0-9]+$/;
    var patternTrue = /^true[0-9]+$/;
    var patternFalse = /^false[0-9]+$/;
    var patternPlusSign = /^plus_sign[0-9]+$/;
    var patternMinusSign = /^minus_sign[0-9]+$/;
    var patternOrSign = /^or_sign[0-9]+$/;
    var patternUnionSign = /^union_sign[0-9]+$/;
    var patternVars = /^vars[0-9]+$/;
    var patternVar = /^var[0-9]+$/;
    var patternValueVar=/^value_var[0-9]+$/;
    var patternInicVar = /^inic_var[0-9]+$/;
    var patternValue = /^value[0-9]+$/;
    var patternArrayDefinition = /^array_definition[0-9]+$/;
    var patternBracketsOpened = /^brackets_opened[0-9]+$/;
    var patternArrayInitialization = /^array_initialization[0-9]+$/;
    var patternElems = /^elems[0-9]+$/;
    var patternElem = /^elem[0-9]+$/;
    var patternBracketsClosed = /^brackets_closed[0-9]+$/;
    var patternSetDefinition = /^set_definition[0-9]+$/;
    var patternSetInitialization = /^set_initialization[0-9]+$/;
    var patternSequenceDefinition = /^sequence_definition[0-9]+$/;
    var patternDoubleLessSign = /^double_less_sign[0-9]+$/;
    var patternSequenceInitialization = /^sequence_initialization[0-9]+$/;
    var patternValues = /^values[0-9]+$/;
    var patternDoubleGreatSign = /^double_great_sign[0-9]+$/;
    var patternExpression = /^expression[0-9]+$/;
    var patternSingleExpressions = /^single_expressions[0-9]+$/;
    var patternSingleExpression = /^single_expression[0-9]+$/;
    var patternTerms = /^terms[0-9]+$/;
    var patternTerm = /^term[0-9]+$/;
    var patternAddOp = /^add_op[0-9]+$/;
    var patternMulOp = /^mul_op[0-9]+$/;
    var patternRelOp = /^rel_op[0-9]+$/;
    var patternFactors = /^factors+[0-9]+$/;
    var patternFactor = /^factor[0-9]+$/;
    var patternElemArray = /^elem_array[0-9]+$/;
    var patternVariable = /^variable[0-9]+$/;
    var patternFunctionCall = /^function_call[0-9]+$/;
    var patternSpecialFunctions = /^special_functions[0-9]+$/;
    var patternArrayAccess = /^array_access[0-9]+$/;
    var patternSubPrgArgs = /^sub_prg_args[0-9]+$/;
    var patternArgs = /^args[0-9]+$/;
    var patternExpressions = /^expressions[0-9]+$/;
    var patternTailFunction = /^tail_function[0-9]+$/;
    var patternHeadFunction = /^head_function[0-9]+$/;
    var patternConsFunction = /^cons_function[0-9]+$/;
    var patternMemberFunction = /^member_function[0-9]+$/;
    var patternIsEmptyFunction = /^is_empty_function[0-9]+$/;
    var patternLengthFunction = /^length_function[0-9]+$/;
    var patternDeleteFunction = /^delete_function[0-9]+$/;
    var patternFormalArgs = /^formal_args[0-9]+$/;
    var patternFBody = /^f_body[0-9]+$/;
    var patternFArgs = /^f_args[0-9]+$/;
    var patternFormalsArgs = /^formals_args[0-9]+$/;
    var patternFormalArg = /^formal_arg[0-9]+$/;
    var patternReturnType = /^return_type[0-9]+$/;
    var patternTypeReturnSubProgram = /^type_return_subprogram[0-9]+$/;
    var patternReturnSubProgram = /^return_subprogram[0-9]+$/;
    var patternMultipleStatement = /^multiple_statement[0-9]+$/;
    var patternStatement = /^statement[0-9]+$/;
    var patternAssignment = /^assignment[0-9]+$/;
    var patternWriteStatement = /^write_statement[0-9]+$/;
    var patternReadStatement = /^read_statement[0-9]+$/;
    var patternConditionalStatement = /^conditional_statement[0-9]+$/;
    var patternIterativeStatement = /^iterative_statement[0-9]+$/;
    var patternSuccOrPred = /^succ_or_pred[0-9]+$/;
    var patternCopyStatement = /^copy_statement[0-9]+$/;
    var patternCatStatement = /^cat_statement[0-9]+$/;
    /*********LEXER*********/
    var patternInt = /^int[0-9]+$/;
    var patternIdentifier = /^identifier[0-9]+$/;
    /***********************/

    function customMenu(node) {
        var items = null;

        if( node.id == "liss" && node.children.length==3){
            items = {
                "delete" : {
                    "label" : "Delete Rule",
                    "action" : function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternName.test(node.id)){
            items = {
                "delete" : {
                    "label" : "Delete Rule",
                    "action" : function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if( patternBody.test(node.id)){
            items = {
                "delete" : {
                    "label" : "Delete Rule",
                    "action" : function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternDeclarations.test(node.id)/*node.id == "declarations"*/){
            items = {
                "delete" : {
                    "label" : "Delete Rule",
                    "action" : function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternVariablesDeclarations.test(node.id)/*node.id=="variable_declaration"*/){
            var tab = node.a_attr.tab;
            if(node.children.length<1){
                items = {
                    "add_variable_declaration" : {
                        "label" : "Add variable declaration",
                        "action" : function () {
                            //Node : variable_declaration
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "variable_declaration"+num, "text" : "variable_declaration",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal", "program": produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                        }
                    }
                };
            }else{
                items = {
                    "add_variable_declaration" : {
                        "label" : "Add variable declaration",
                        "action" : function () {
                            //Node : variable_declaration
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "variable_declaration"+num, "text" : "variable_declaration",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                        }
                    },
                    "delete" : {
                        "label" : "Delete Rule",
                        "action" : function () {
                            //liss.debugger("WOOT1");
                            //liss.debugger(node.children);
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                            //liss.debugger("WOOT2");
                        }
                    }
                };
            }
        }else if(patternVariableDeclaration.test(node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);

            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                        //$("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternVars.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length ==1){

                items = {
                    "add_var" : {
                        "label" : "Add Var",
                        "action" : function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma"+num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ", ","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : var
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "var"+num, "text" : "var",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":0}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "add_var": {
                        "label": "Add Var",
                        "action": function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma" + num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ", ","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : var
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "var" + num, "text": "var",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                            }, "last", function () {
                            });

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : var
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "var" + num, "text": "var",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function () {
                            });

                            num++;

                            //$("#lissSyntax").jstree("open_node", $("#" + data.node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternVar.test(node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);


            if(nodeParent.children.length===1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {var numb
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else if( nodeParent.children.length>1 && position >= 2 && position!= -1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternValueVar.test(node.id)){
//            var tab = node.a_attr.tab;
            var tab=0;

            if(node.children<1){
                items = {
                    "add_empty":{
                        "label": "Add Empty",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_inic_var": {
                        "label": "Add Inic_Var",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "equal"+num, "text": "=",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "=","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : inic_var
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "inic_var" + num, "text": "inic_var",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternInicVar.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length<1){
                items = {
                    "add_constant":{
                        "label": "Add Value",
                        "action": function () {
                            //Node : contant
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "value" + num, "text": "value",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined", "tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    },
                    "add_array_definition": {
                        "label": "Add Array_Definition",
                        "action": function () {
                            //Node : array_definition
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "array_definition"+num, "text": "array_definition",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined", "tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    },
                    "add_set_definition": {
                        "label": "Add Set_Definition",
                        "action": function () {
                            //Node : set_definition
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "set_definition" + num, "text": "set_definition",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined", "tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    },
                    "add_sequence_definition": {
                        "label": "Add Sequence_Definition",
                        "action": function () {
                            //Node : sequence_definition
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "sequence_definition" + num, "text": "sequence_definition",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined", "tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternType.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length<1){
                items = {
                    "add_integer":{
                        "label": "Add Integer",
                        "action": function () {
                            //Node : integer
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "integer" + num, "text": "integer",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "integer","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_boolean": {
                        "label": "Add Boolean",
                        "action": function () {
                            //Node : boolean
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "boolean" + num, "text": "boolean",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "boolean","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_set": {
                        "label": "Add Set",
                        "action": function () {
                            //Node : set
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "set" + num, "text": "set",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "set","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_sequence": {
                        "label": "Add Sequence",
                        "action": function () {
                            //Node : sequence
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "sequence" + num, "text": "sequence",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "sequence","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_array_size_dimension": {
                        "label": "Add Array_Size_Dimension",
                        "action": function () {
                            //Node : array
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "array" + num, "text": "array",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "array ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : size
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "size" + num, "text": "size",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "size ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node: dimension
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "dimension" + num, "text": "dimension",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternDimension.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternNumbers.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length ==1){
                items = {
                    "add_number": {
                        "label": "Add Number",
                        "action": function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma" + num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ",","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : number
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "number" + num, "text": "number",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else{
                items = {
                    "add_number": {
                        "label": "Add Number",
                        "action": function () {

                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma" + num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ",","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : number
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "number" + num, "text": "number",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //$("#lissSyntax").jstree("open_node", $("#" + data.node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : number
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "number" + num, "text": "number",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //$("#lissSyntax").jstree("open_node", $("#" + data.node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternNumber.test(node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);


            if(nodeParent.children.length===1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {var numb
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else if( nodeParent.children.length>1 && position >= 2 && position!= -1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternValue.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length<1) {
                items = {
                    "add_sign_number":{
                        "label": "Add Sign_Number",
                        "action": function(){
                            //Node : sign
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "sign" + num, "text": "sign",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : number
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "number" + num, "text": "number",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            //Refresh the content of TextArea
                            //liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_true":{
                        "label": "Add True_Boolean",
                        "action": function(){
                            //Node : true
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "true" + num, "text": "true",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "true","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_false":{
                        "label": "Add False_Boolean",
                        "action": function(){
                            //Node : false
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "false" + num, "text": "false",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "false","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                if(node.children.length == 1){
                    items = {
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children[0]);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    }
                }else{
                    items = {
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children[1]);
                                $("#lissSyntax").jstree(this).delete_node(node.children[0]);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    }
                }
            }
        }else if(patternSign.test(node.id)){
            if(node.children.length < 1){
                items ={
                    "add_empty":{
                        "label": "Add Empty",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ""}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_plus_sign":{
                        "label": "Add Plus_Sign",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "plus_sign" + num, "text": "+",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "+"}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },"add_minus_sign":{
                        "label": "Add Minus_Sign",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "minus_sign" + num, "text": "-",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "-"}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children[1]);
                            $("#lissSyntax").jstree(this).delete_node(node.children[0]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternArrayDefinition.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternArrayInitialization.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternElems.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length ==1){
                items = {
                    "add_elem" : {
                        "label" : "Add Elem",
                        "action" : function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma"+num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ",","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : elem
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "elem"+num, "text" : "elem",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "add_elem": {
                        "label": "Add Elem",
                        "action": function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma" + num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ",","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : elem
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "elem" + num, "text": "elem",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : elem
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "elem" + num, "text": "elem",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","tab":tab}
                            }, "last", function () {
                            });

                            num++;

                            //$("#lissSyntax").jstree("open_node", $("#" + data.node.id));

                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternElem.test(node.id)){
            if(node.children.length<1){
                var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                var positionNodeInParent = function (nodeParent, node) {
                    var res = -1;
                    for (var i = 0; i < nodeParent.children.length; i++) {
                        if (nodeParent.children[i] === node.id) {
                            res = i;
                        }
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent, node);
                var tab = node.a_attr.tab;

                if(position == 0) {
                    items = {
                        "add_number": {
                            "label": "Add Number",
                            "action": function () {
                                //Node : number
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "number" + num, "text": "number",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Instruction for opening the branch
                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            }
                        },
                        "add_array_definition": {
                            "label": "Add Array_Definition",
                            "action": function () {
                                //Node : array_definition
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "array_definition" + num, "text": "array_definition",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Instruction for opening the branch
                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            }
                        }
                    };
                }else{
                    items = {
                        "add_number": {
                            "label": "Add Number",
                            "action": function () {
                                //Node : number
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "number" + num, "text": "number",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Instruction for opening the branch
                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            }
                        },
                        "add_array_definition": {
                            "label": "Add Array_Definition",
                            "action": function () {
                                //Node : array_definition
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "array_definition" + num, "text": "array_definition",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Instruction for opening the branch
                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            }
                        },
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                }
            }else{
                var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                var positionNodeInParent = function(nodeParent,node){
                    var res=-1;
                    for(var i=0; i < nodeParent.children.length;i++){
                        if(nodeParent.children[i]===node.id){res=i;}
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent,node);


                if(nodeParent.children.length === 1){
                    items = {
                        "change_rule": {
                            "label": "Change Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                }else if( nodeParent.children.length>1 && position!= -1){
                    if(position >= 2) {
                        items = {
                            "change_rule": {
                                "label": "Change Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(node.children);
                                    liss.setText(getProgramLissBeta());
                                }
                            },
                            "delete": {
                                "label": "Delete Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                                    $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                                    liss.setText(getProgramLissBeta());
                                }
                            }
                        }
                    }else{
                        items = {
                            "change_rule": {
                                "label": "Change Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(node.children);
                                    liss.setText(getProgramLissBeta());
                                }
                            }
                        }
                    }
                }
            }
        }else if(patternSequenceDefinition.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternSequenceInitialization.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length<1){
                items = {
                    "add_empty": {
                        "label": "Add Empty",
                        "action": function () {
                            //Node : =
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_values": {
                        "label": "Add Values",
                        "action": function () {
                            //Node : values
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "values" + num, "text": "values",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternValues.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternSetDefinition.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            }
        }else if(patternSetInitialization.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length < 1){
                items = {
                    "add_empty":{
                        "label": "Add Empty",
                        "action": function () {
                            //Node : empty
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_expression": {
                        "label": "Add Expression",
                        "action": function () {

                            //Node : identifier
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "identifier"+num, "text": "IDENTIFIER",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "terminal edit", "program": "undefined","tab":0,"expressionregularrule": "ID"}
                            }, "last", function () {
                            });
                            num++;

                            //Node : |
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "pipe" + num, "text": "|",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": " | ","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            //Node : expression
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "expression"+num, "text" : "expression",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternExpression.test(node.id)){
            if(patternExpressions.test(node.parent)){
                var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                var positionNodeInParent = function (nodeParent, node) {
                    var res = -1;
                    for (var i = 0; i < nodeParent.children.length; i++) {
                        if (nodeParent.children[i] === node.id) {
                            res = i;
                        }
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent, node);

                if (nodeParent.children.length === 1) {
                    items = {
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                } else if (nodeParent.children.length > 1 && position >= 2 && position != -1) {
                    items = {
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                }
            }else {
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternSingleExpressions.test(node.id)){
            if(patternExpression.test(node.parent)) {
                var tab = node.a_attr.tab;

                if (node.children.length == 1) {
                    items = {
                        "add_single_expression": {
                            "label": "Add Single_Expression",
                            "action": function () {
                                //Node : rel_op
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "rel_op" + num, "text": "rel_op",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":" undefined ","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Node : single_expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "single_expression" + num, "text": "single_expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //$("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                            }
                        }
                    }
                } else {
                    items = {
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children);

                                //Node : single_expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "single_expression" + num, "text": "single_expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;
                            }
                        }
                    };
                }
            }else if(patternElemArray.test(node.parent)){
                var tab = node.a_attr.tab;

                if(node.children.length == 1){
                    items = {
                        "add_single_expression": {
                            "label": "Add Single_expression",
                            "action": function(){
                                //Node : ,
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "comma"+num, "text": ",",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program" : ","}
                                }, "last", function () {
                                });
                                num++;

                                //Node : single_expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "single_expression"+num, "text": "single_expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" +node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                }else{
                    items = {
                        "add_single_expression": {
                            "label": "Add Single_expression",
                            "action": function(){
                                //Node : ,
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "comma"+num, "text": ",",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program" : ","}
                                }, "last", function () {
                                });
                                num++;

                                //Node : single_expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "single_expression"+num, "text": "single_expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" +node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        },
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children);

                                //Node : single_expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "single_expression"+num, "text": "single_expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            }
                        }
                    };
                }
            }
        }else if(patternSingleExpression.test(node.id)){

            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);

            if(nodeParent.children.length===1) {
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else if( nodeParent.children.length>1 && position >= 2 && position!= -1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternRelOp.test(node.id)){
            if(node.children.length < 1){
                items ={
                    "add_double_equal_sign": {
                        "label": "Add Double_Equal_Sign",
                        "action": function(){
                            //Node : ==
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "double_plus_sign"+num, "text": "==",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "==","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_different_sign": {
                        "label": "Add Different_Sign",
                            "action": function(){
                                //Node : !=
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "different_sign"+num, "text": "!=",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program": "!=","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" +node.id));
                                liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_less_sign": {
                        "label": "Add Less_Sign",
                        "action": function(){
                            //Node : <
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "less_sign"+num, "text": "<",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "<","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_greater_sign": {
                        "label": "Add Greater_Sign",
                        "action": function(){
                            //Node : >
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "greater_sign"+num, "text": ">",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ">","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_less_or_equal_sign": {
                        "label": "Add Less_Or_Equal_Sign",
                        "action": function(){
                            //Node : <=
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "less_or_equal_sign"+num, "text": "<=",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "<=","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_greater_or_equal_sign": {
                        "label": "Add Greater_Or_Equal_Sign",
                        "action": function(){
                            //Node : >=
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "greater_or_equal_sign"+num, "text": ">=",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ">=","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_contains_sign": {
                        "label": "Add Contains_Sign",
                        "action": function(){
                            //Node : in
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "contains_sign"+num, "text": "in",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "in","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternTerms.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length == 1){
                items = {
                    "add_term": {
                        "label": "Add Term",
                        "action": function() {
                            //Node : add_op
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "add_op" + num, "text": "add_op",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal", "program":" undefined ","tab": tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : term
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "term" + num, "text": "term",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal", "program":"undefined","tab": tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                        }
                    }
                };
            }else{
                items = {
                    "add_term": {
                        "label": "Add Term",
                        "action": function(){
                            //Node : add_op
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "add_op"+num, "text": "add_op",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":" undefined ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : term
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "term"+num, "text": "term",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : term
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "term"+num, "text": "term",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    }
                };
            }
        }else if(patternTerm.test(node.id)) {
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function (nodeParent, node) {
                var res = -1;
                for (var i = 0; i < nodeParent.children.length; i++) {
                    if (nodeParent.children[i] === node.id) {
                        res = i;
                    }
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent, node);

            if (nodeParent.children.length === 1) {
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            } else if (nodeParent.children.length > 1 && position >= 2 && position != -1) {
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternAddOp.test(node.id)){
            if(node.children.length < 1){
                items ={
                    "add_plus_sign": {
                        "label": "Add Plus_Sign",
                        "action": function(){
                            //Node : +
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "plus_sign"+num, "text": "+",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "+","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_minus_sign": {
                        "label": "Add Minus_Sign",
                        "action": function(){
                            //Node : -
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "minus_sign"+num, "text": "-",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "-","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_or_sign": {
                        "label": "Add Or_Sign",
                        "action": function(){
                            //Node : +
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "or_sign"+num, "text": "||",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "||","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_union_sign": {
                        "label": "Add Union_Sign",
                        "action": function(){
                            //Node : +
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "union_sign"+num, "text": "++",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "++","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternFactors.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length == 1){
                items = {
                    "add_factor": {
                        "label": "Add Factor",
                        "action": function(){
                            //Node : mul_op
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "mul_op"+num, "text": "mul_op",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":" undefined ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : factor
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "factor"+num, "text": "factor",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    }
                };
            }else{
                items = {
                    "add_term": {
                        "label": "Add Factor",
                        "action": function(){
                            //Node : mul_op
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "mul_op"+num, "text": "mul_op",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":" undefined ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : factor
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "factor"+num, "text": "factor",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : factor
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "factor"+num, "text": "factor",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    }
                };
            }
        }else if(patternFactor.test(node.id)){
            if(node.children.length < 1) {
                var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                var positionNodeInParent = function (nodeParent, node) {
                    var res = -1;
                    for (var i = 0; i < nodeParent.children.length; i++) {
                        if (nodeParent.children[i] === node.id) {
                            res = i;
                        }
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent, node);
                var tab = node.a_attr.tab;

                if(position === 0) {
                    items = {
                        "add_inic_var": {
                            "label": "Add Inic_Var",
                            "action": function () {
                                //Node : inic_var
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "inic_var" + num, "text": "inic_var",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_variable":{
                            "label": "Add Variable",
                            "action": function(){
                                //Node : variable
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "variable" + num, "text": "variable",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_expression":{
                            "label": "Add Expression",
                            "action": function(){
                                //Node : (
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "parenthesis_open" + num, "text": "(",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":"(","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                //Node : expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "expression" + num, "text": "expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Node : )
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "parenthesis_close" + num, "text": ")",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":")","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        },
                        "add_factor":{
                            "label": "Add Factor",
                            "action": function(){
                                //Node : !
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "exclamation_point" + num, "text": "!",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":"!","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                //Node : factor
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "factor" + num, "text": "factor",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        },
                        "add_function_call":{
                            "label": "Add Function_Call",
                            "action": function(){
                                //Node : function_call
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "function_call" + num, "text": "function_call",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_special_functions":{
                            "label": "Add Special_Functions",
                            "action": function(){
                                //Node : function_call
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "special_functions" + num, "text": "special_functions",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        }

                    };
                }else{
                    items = {
                        "add_inic_var": {
                            "label": "Add Inic_Var",
                            "action": function () {
                                //Node : inic_var
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "inic_var" + num, "text": "inic_var",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_variable":{
                            "label": "Add Variable",
                            "action": function(){
                                //Node : variable
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "variable" + num, "text": "variable",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_expression":{
                            "label": "Add Expression",
                            "action": function(){
                                //Node : (
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "parenthesis_open" + num, "text": "(",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":"(","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                //Node : expression
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "expression" + num, "text": "expression",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                //Node : )
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "parenthesis_close" + num, "text": ")",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":")","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        },
                        "add_factor":{
                            "label": "Add Factor",
                            "action": function(){
                                //Node : !
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "exclamation_point" + num, "text": "!",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: true,  // is the node disabled
                                    }, a_attr: {"class": "terminal", "program":"!","tab":0}
                                }, "last", function () {
                                });
                                num++;

                                //Node : factor
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "factor" + num, "text": "factor",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));
                                liss.setText(getProgramLissBeta());
                            }
                        },
                        "add_function_call":{
                            "label": "Add Function_Call",
                            "action": function(){
                                //Node : function_call
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "function_call" + num, "text": "function_call",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "add_special_functions":{
                            "label": "Add Special_Functions",
                            "action": function(){
                                //Node : function_call
                                $('#lissSyntax').jstree().create_node(node, {
                                    "id": "special_functions" + num, "text": "special_functions",
                                    state: {
                                        opened: false,  // is the node open
                                        disabled: false,  // is the node disabled
                                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                                }, "last", function () {
                                });
                                num++;

                                $("#lissSyntax").jstree("open_node", $("#" + node.id));

                            }
                        },
                        "delete": {
                            "label": "Delete Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                                $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                                liss.setText(getProgramLissBeta());
                            }
                        }

                    };
                }
            }else{
                var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                var positionNodeInParent = function (nodeParent, node) {
                    var res = -1;
                    for (var i = 0; i < nodeParent.children.length; i++) {
                        if (nodeParent.children[i] === node.id) {
                            res = i;
                        }
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent, node);

                if (nodeParent.children.length === 1) {
                    items = {
                        "change_rule":{
                            "label": "Change Rule",
                            "action": function () {
                                $("#lissSyntax").jstree(this).delete_node(node.children);
                                liss.setText(getProgramLissBeta());
                            }
                        }
                    };
                }else if (nodeParent.children.length > 1 && position != -1) {
                    if(position >= 2) {
                        items = {
                            "change_rule": {
                                "label": "Change Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(node.children);
                                    liss.setText(getProgramLissBeta());
                                }
                            },
                            "delete": {
                                "label": "Delete Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                                    $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position - 1]);
                                    liss.setText(getProgramLissBeta());
                                }
                            }
                        };
                    }else{
                        items = {
                            "change_rule":{
                                "label": "Change Rule",
                                "action": function () {
                                    $("#lissSyntax").jstree(this).delete_node(node.children);
                                    liss.setText(getProgramLissBeta());
                                }
                            }
                        };
                    }
                }
            }
        }else if(patternMulOp.test(node.id)){
            if(node.children.length < 1){
                items ={
                    "add_multiply_sign": {
                        "label": "Add Multiply_Sign",
                        "action": function(){
                            //Node : *
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "multiply_sign"+num, "text": "*",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "*","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_division_sign": {
                        "label": "Add Division_Sign",
                        "action": function(){
                            //Node : /
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "division_sign"+num, "text": "/",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "/","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_and_sign": {
                        "label": "Add And_Sign",
                        "action": function(){
                            //Node : &&
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "and_sign"+num, "text": "&&",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "&&","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_intersection_sign": {
                        "label": "Add Intersection_Sign",
                        "action": function(){
                            //Node : **
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "intersection_sign"+num, "text": "**",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "**","tab":0}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternVariable.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternArrayAccess.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length < 1){
                items = {
                    "add_empty":{
                        "label": "Add Empty",
                        "action": function () {
                            //Node : empty
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ""}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_elem_array": {
                        "label": "Add Elem_Array",
                        "action": function () {
                            //Node : [
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "brackets_opened" + num, "text": "[",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "["}
                            }, "last", function () {
                            });
                            num++;

                            //Node : elem_array
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "elem_array" + num, "text": "elem_array",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : ]
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "brackets_closed" + num, "text": "]",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "]"}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternElemArray.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternFunctionCall.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternSubPrgArgs.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length < 1){
                items = {
                    "add_empty":{
                        "label": "Add Empty",
                        "action": function () {
                            //Node : empty
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "empty" + num, "text": "empty",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": "","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_args": {
                        "label": "Add Args",
                        "action": function () {
                            //Node : args
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "args" + num, "text": "args",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));

                        }
                    }
                }
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternArgs.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternExpressions.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length == 1){
                items = {
                    "add_expression": {
                        "label": "Add Expression",
                        "action": function(){
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma"+num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program" : ",","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : expression
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "expression"+num, "text": "expression",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "add_expression": {
                        "label": "Add Expression",
                        "action": function(){
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma"+num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program" : ",","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : expression
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "expression"+num, "text": "expression",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : Expression
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "expression"+num, "text": "expression",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    }
                };
            }
        }else if(patternSpecialFunctions.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length < 1){
                items = {
                    "add_tail": {
                        "label": "Add Tail_Function",
                        "action": function () {
                            //Node : Tail_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "tail_function"+num, "text": "tail_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_head": {
                        "label": "Add Head_Function",
                        "action": function () {
                            //Node : Head_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "head_function"+num, "text": "head_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_cons": {
                        "label": "Add Cons_Function",
                        "action": function () {
                            //Node : Cons_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "cons_function"+num, "text": "cons_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_member": {
                        "label": "Add Member_Function",
                        "action": function () {
                            //Node : member_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "member_function"+num, "text": "member_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_is_empty": {
                        "label": "Add Is_Empty_Function",
                        "action": function () {
                            //Node : Is_Empty_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "is_empty_function"+num, "text": "is_empty_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_length": {
                        "label": "Add Length_Function",
                        "action": function () {
                            //Node : Length_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "length_function"+num, "text": "length_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    },
                    "add_delete": {
                        "label": "Add Delete_Function",
                        "action": function () {
                            //Node : Delete_Function
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "delete_function"+num, "text": "delete_function",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            $("#lissSyntax").jstree("open_node", $("#" +node.id));

                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternTailFunction.test(node.id) || patternHeadFunction.test(node.id) ||
                patternConsFunction.test(node.id) || patternMemberFunction.test(node.id) ||
                patternIsEmptyFunction.test(node.id) || patternLengthFunction.test(node.id) ||
                patternDeleteFunction.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternSubprogramsDefinitions.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length<1){
                items = {
                    "add_subprogram_definition" : {
                        "label" : "Add subprogram definition",
                        "action" : function () {
                            //Node : subprogram_definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "subprogram_definition"+num, "text" : "subprogram_definition",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    }
                };
            }else{
                items = {
                    "add_subprogram_definition" : {
                        "label" : "Add subprogram definition",
                        "action" : function () {
                            //Node : subprogram definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "subprogram_definition"+num, "text" : "subprogram_definition",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    },
                    "delete" : {
                        "label" : "Delete Rule",
                        "action" : function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternSubprogramDefinition.test(node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);

            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                        //$("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternFormalArgs.test(node.id)){
            var tab = node.a_attr.tab;
            if(node.children.length < 1){
                items = {
                    "add_empty": {
                        "label": "Add Empty",
                        "action": function () {
                            //Node : subprogram definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "empty"+num, "text" : "empty",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","tab":tab,"program":""}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_f_args":{
                        "label":"Add F_Args",
                        "action": function(){
                            //Node : subprogram definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "f_args"+num, "text" : "f_args",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //$("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternFArgs.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //$("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternFormalsArgs.test(node.id)){
            var tab = node.a_attr.tab;

            if(node.children.length ==1){

                items = {
                    "add_var" : {
                        "label" : "Add Formal_Arg",
                        "action" : function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma"+num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ", ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : formal_arg
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "formal_arg"+num, "text" : "formal_arg",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "add_var": {
                        "label": "Add Formal_Arg",
                        "action": function () {
                            //Node : ,
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "comma" + num, "text": ",",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: true,  // is the node disabled
                                }, a_attr: {"class": "terminal", "program": ", ","tab":tab}
                            }, "last", function () {
                            });
                            num++;

                            //Node : formal_arg
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "formal_arg" + num, "text": "formal_arg",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#" + node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);

                            //Node : formal_arg
                            $('#lissSyntax').jstree().create_node(node, {
                                "id": "formal_arg" + num, "text": "formal_arg",
                                state: {
                                    opened: false,  // is the node open
                                    disabled: false,  // is the node disabled
                                }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                            }, "last", function () {
                            });

                            num++;
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternFormalArg.test(node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
            var positionNodeInParent = function(nodeParent,node){
                var res=-1;
                for(var i=0; i < nodeParent.children.length;i++){
                    if(nodeParent.children[i]===node.id){res=i;}
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent,node);


            if(nodeParent.children.length===1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }else if( nodeParent.children.length>1 && position >= 2 && position!= -1){
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position-1]);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                }
            }
        }else if(patternReturnType.test(node.id)){
            var tab = node.a_attr.tab;
            if(node.children.length < 1){
                items = {
                    "add_empty": {
                        "label": "Add Empty",
                        "action": function () {
                            //Node : subprogram definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "empty"+num, "text" : "empty",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":"","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_type_return_subrprogram":{
                        "label":"Add Type_Return_SubProgram",
                        "action": function(){
                            //Node : ->
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "arrow"+num, "text" : "->",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":"->","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : type return subprogram
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "type_return_subprogram"+num, "text" : "type_return_subprogram",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternTypeReturnSubProgram.test(node.id)){
            if(node.children.length<1){
                items = {
                    "add_integer": {
                        "label": "Add Integer",
                        "action": function () {
                            //Node : integer
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "integer"+num, "text" : "integer",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":"integer","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_boolean":{
                        "label":"Add Boolean",
                        "action": function(){

                            //Node : boolean
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "boolean"+num, "text" : "boolean",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":"boolean","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };

            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternFBody.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternReturnSubProgram.test(node.id)){
            var tab = node.a_attr.tab;
            if(node.children.length < 1){
                items = {
                    "add_empty": {
                        "label": "Add Empty",
                        "action": function () {
                            //Node : subprogram definition
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "empty"+num, "text" : "empty",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":""}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_return":{
                        "label":"Add Return_SubProgram",
                        "action": function(){
                            //Node : return
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "return"+num, "text" : "return",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": produceTabs(tab)+"return "}
                            }, "last", function(){});
                            num++;

                            //Node : expression
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "expression"+num, "text" : "expression",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","tab":0}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "semicolon"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program":";\n"}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }else{
                items = {
                    "delete": {
                        "label": "Delete Rule",
                        "action": function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    }
                };
            }
        }else if(patternStatements.test(node.id)){
            items = {
                "delete": {
                    "label": "Delete Rule",
                    "action": function () {
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        liss.setText(getProgramLissBeta());
                    }
                }
            };
        }else if(patternMultipleStatement.test(node.id)){
            var tab = node.a_attr.tab;
            if(node.children.length<1){
                items = {
                    "add_statement" : {
                        "label" : "Add statement",
                        "action" : function () {
                            //Node : statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "statement"+num, "text" : "statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    }
                };
            }else{
                items = {
                    "add_statement" : {
                        "label" : "Add statment",
                        "action" : function () {
                            //Node : statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "statement"+num, "text" : "statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});

                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    },
                    "delete" : {
                        "label" : "Delete Rule",
                        "action" : function () {
                            //liss.debugger("WOOT1");
                            //liss.debugger(node.children);
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                            //liss.debugger("WOOT2");
                        }
                    }
                };
            }
        }else if(patternStatement.test(node.id)){
            if(node.children.length<1){
                var tab = node.a_attr.tab;
                items = {
                    "add_assignment": {
                        "label": "Add Assignment",
                        "action": function () {
                            //Node : assignment
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "assignment"+num, "text" : "assignment",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_write_statement": {
                        "label": "Add Write Statement",
                        "action": function () {
                            //Node : write_statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "write_statement"+num, "text" : "write_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_read_statement": {
                        "label": "Add Read Statement",
                        "action": function () {
                            //Node : read_statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "read_statement"+num, "text" : "read_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_conditional_statement": {
                        "label": "Add Conditional Statement",
                        "action": function () {
                            //Node : conditional statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "conditional_statement"+num, "text" : "conditional_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    },
                    "add_iterative_statement": {
                        "label": "Add Iterative Statement",
                        "action": function () {
                            //Node : iterative_statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "iterative_statement"+num, "text" : "iterative_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined\n","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));

                        }
                    },
                    "add_function_call": {
                        "label": "Add Function Call",
                        "action": function () {
                            //Node : function_call
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "function_call"+num, "text" : "function_call",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_succ_or_pred": {
                        "label": "Add Succ Or Pred",
                        "action": function () {
                            //Node : assignment
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "succ_or_pred"+num, "text" : "succ_or_pred",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_copy_statement": {
                        "label": "Add Copy Statement",
                        "action": function () {
                            //Node : copy_statement
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "copy_statement"+num, "text" : "copy_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "add_cat_statement": {
                        "label": "Add Cat Statement",
                        "action": function () {
                            //Node : cat_assignment
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "cat_statement"+num, "text" : "cat_statement",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : false,  // is the node disabled
                                }, a_attr : { "class" : "non-terminal","program":produceTabs(tab)+"undefined","tab":tab}
                            }, "last", function(){});
                            num++;

                            //Node : ;
                            $('#lissSyntax').jstree().create_node(node,  {
                                "id" : "comma"+num, "text" : ";",
                                state       : {
                                    opened    : false,  // is the node open
                                    disabled  : true,  // is the node disabled
                                }, a_attr : { "class" : "terminal","program": ";\n","tab":0}
                            }, "last", function(){});
                            num++;

                            //Instruction for opening the branch
                            $("#lissSyntax").jstree("open_node", $("#"+node.id));
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete" : {
                        "label" : "Delete Rule",
                        "action" : function () {
                            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                            liss.debugger(node.parent);
                            var positionNodeInParent = function(nodeParent,node){
                                var res=-1;
                                for(var i=0; i < nodeParent.children.length;i++){
                                    if(nodeParent.children[i]===node.id){res=i;}
                                }
                                return res;
                            };
                            var position = positionNodeInParent(nodeParent,node);
                            liss.debugger(position);
                            //liss.debugger("WOOT1");
                            //liss.debugger(node.children);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                            //liss.debugger("WOOT2");
                        }
                    }
                };
            }else{
                items = {
                    "change_rule" : {
                        "label" : "Change rule",
                        "action" : function () {
                            $("#lissSyntax").jstree(this).delete_node(node.children);
                            liss.setText(getProgramLissBeta());
                        }
                    },
                    "delete" : {
                        "label" : "Delete Rule",
                        "action" : function () {
                            var nodeParent = $("#lissSyntax").jstree(this).get_node(node.parent);
                            var positionNodeInParent = function(nodeParent,node){
                                var res=-1;
                                for(var i=0; i < nodeParent.children.length;i++){
                                    if(nodeParent.children[i]===node.id){res=i;}
                                }
                                return res;
                            };
                            var position = positionNodeInParent(nodeParent,node);
                            //liss.debugger("WOOT1");
                            //liss.debugger(node.children);
                            $("#lissSyntax").jstree(this).delete_node(nodeParent.children[position]);
                            //Refresh the content of TextArea
                            liss.setText(getProgramLissBeta());
                            //liss.debugger("WOOT2");
                        }
                    }
                };
            }
        }else if(patternAssignment.test(node.id)){
            items ={
                "delete" : {
                    "label" : "Delete Rule",
                    "action" : function () {
                        //liss.debugger("WOOT1");
                        //liss.debugger(node.children);
                        $("#lissSyntax").jstree(this).delete_node(node.children);
                        //Refresh the content of TextArea
                        liss.setText(getProgramLissBeta());
                        //liss.debugger("WOOT2");
                    }
                }
            };
        }
        return items;
    }


    /*****************WHEN NODE IS SELECTED WHAT DO WE DO RULES****************/

    $('#lissSyntax').on("select_node.jstree", function (e, data) {

        //Puting context for editing, depending the context
        if(patternIdentifier.test(data.node.id) || patternInt.test(data.node.id)){
            //Edit the node by clicking it!!!!!!!
            var ref = $('#lissSyntax').jstree(true), sel = ref.get_selected();
            if(!sel.length) { return false; }
            sel = sel[0];
            ref.edit(sel);
        }

        if (data.node.id == "liss") {
            if(data.node.children.length < 1) {
                var tab = data.node.a_attr.tab;

                //Node : program
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "program_liss", "text": "program",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "program ", "tab":tab}
                }, "last", function () {
                });

                //Node : name
                $('#lissSyntax').jstree().create_node(data.node,{
                    "id":"name"+num, "text": "name",
                    state:{
                        opened: true,
                        disabled: false,
                    }, a_attr:{"class":"non-terminal","program":"undefined","tab":tab}
                },"last",function(){
                });
                num++;

                //Node : body
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "body",
                    "text": "body",
                    a_attr: {"class": "non-terminal", "program": " undefined","tab":tab}
                }, "last", function () {
                });

                //Instruction for opening the branch
                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternName.test(data.node.id)){
            if(data.node.children.length<1) {
                var tab = data.node.a_attr.tab;
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier" + num,
                    "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    },
                    a_attr: {"class": "terminal edit", "program": "undefined", "tab": 0, "expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if (patternBody.test(data.node.id)) {
            if(data.node.children < 1) {
                var tab = data.node.a_attr.tab+1;

                //Node : {
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open"+num, "text": "{",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "{\n", "tab":0}
                }, "last", function () {
                });
                num++;

                //Node : declarations_t
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "declarations_body", "text": "declarations",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "declarations\n", "tab":tab}
                }, "last", function () {
                });

                //Node : declarations_nt
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "declarations" + num, "text": "declarations",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program": produceTabs(tab+1)+"undefined\n","tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : statements_t
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "statements_body", "text": "statements",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "statements\n","tab":tab}
                }, "last", function () {
                });

                //Node : statements_nt
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "statements" + num, "text": "statements",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program": produceTabs(tab+1)+"undefined\n","tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : }
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close"+num, "text": "}",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "}","tab":0}
                }, "last", function () {
                });
                num++;

                //Instruction for opening the branch
                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        } else if (patternDeclarations.test(data.node.id)) {
            if(data.node.children<2) {
                var tab = data.node.a_attr.tab+1;

                //Node : variable_declaration*
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "variables_declarations"+num, "text": "variable_declaration*",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program":"","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : subprogram_definition*
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "subprograms_definitions"+num, "text": "subprogram_definition*",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"", "tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternVariablesDeclarations.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternVariableDeclaration.test(data.node.id)){
            if(data.node.children<4){
                var tab = data.node.a_attr.tab;
                //Node : vars+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "vars" + num, "text": "vars+",
                    state: {
                        opened: true,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program":produceTabs(tab)+"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : var
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "var" + num, "text": "var",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program": produceTabs(tab)+"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : ->
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "arrow"+num, "text": "->",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": " -> ","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : type
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "type" + num, "text": "type",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : ;
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "semicolon"+num, "text": ";",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": ";\n","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternVars.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternVar.test(data.node.id)){
            var nodeParent = $("#lissSyntax").jstree(this).get_node(data.node.parent);
            var positionNodeInParent = function (nodeParent, node) {
                var res = -1;
                for (var i = 0; i < nodeParent.children.length; i++) {
                    if (nodeParent.children[i] === node.id) {
                        res = i;
                    }
                }
                return res;
            };
            var position = positionNodeInParent(nodeParent, data.node);
            if(data.node.children.length<1) {
                var tab = data.node.a_attr.tab;

                if(position === 0) {
                    //Node : identifier_var
                    $('#lissSyntax').jstree().create_node(data.node, {
                        "id": "identifier" + num,
                        "text": "IDENTIFIER",
                        state: {
                            opened: false,  // is the node open
                            disabled: false,  // is the node disabled
                        },
                        a_attr: {
                            "class": "terminal edit",
                            "program": "undefined",
                            "expressionregularrule": "ID",
                            "tab": tab
                        }
                    }, "last", function () {
                    });
                    num++;
                }else{
                    //Node : identifier_var
                    $('#lissSyntax').jstree().create_node(data.node, {
                        "id": "identifier" + num,
                        "text": "IDENTIFIER",
                        state: {
                            opened: false,  // is the node open
                            disabled: false,  // is the node disabled
                        },
                        a_attr: {
                            "class": "terminal edit",
                            "program": "undefined",
                            "expressionregularrule": "ID",
                            "tab": 0
                        }
                    }, "last", function () {
                    });
                    num++;
                }

                //Node : value_var
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "value_var" + num, "text": "value_var",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":" undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternValueVar.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternInicVar.test(data.node.id)) {
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternType.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternDimension.test(data.node.id)){
            if(data.node.children<1){
                var tab = data.node.a_attr.tab;
                //Node : numbers+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "numbers" + num, "text": "numbers+",
                    state: {
                        opened: true,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : number
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "number" + num, "text": "number",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternNumbers.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternNumber.test(data.node.id)){
            if(data.node.children.length<1){
                //Node : int
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "int" + num, "text": "NUMBER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined", "expressionregularrule": "NBR","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternValue.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternSign.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternArrayDefinition.test(data.node.id)){
            if(data.node.children.length < 3){
                var tab = data.node.a_attr.tab;
                //Node : [
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "brackets_opened"+num, "text": "[",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "[","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : array_initialization
                $('#lissSyntax').jstree().create_node(data.node,  {
                    "id" : "array_initialization"+num, "text" : "array_initialization",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                //Node : ]
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "brackets_closed"+num, "text": "]",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "]","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternArrayInitialization.test(data.node.id)){
            if(data.node.children.length<1){
                var tab = data.node.a_attr.tab;
                //Node : elems+
                $('#lissSyntax').jstree().create_node(data.node,  {
                    "id" : "elems"+num, "text" : "elems+",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                //Node : elem
                $('#lissSyntax').jstree().create_node(data.node.children[0],  {
                    "id" : "elem"+num, "text" : "elem",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternElems.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternElem.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternSequenceDefinition.test(data.node.id)){
            if(data.node.children.length < 3){
                var tab = data.node.a_attr.tab;
                //Node : <<
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "double_less_sign"+num, "text": "<<",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "<<","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : sequence_initialization
                $('#lissSyntax').jstree().create_node(data.node,  {
                    "id" : "sequence_initialization"+num, "text" : "sequence_initialization",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                //Node : >>
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "double_great_sign"+num, "text": ">>",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": ">>","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSequenceInitialization.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternValues.test(data.node.id)){
            if(data.node.children.length<1){
                var tab = data.node.a_attr.tab;
                //Node : numbers+
                $('#lissSyntax').jstree().create_node(data.node,  {
                    "id" : "numbers"+num, "text" : "numbers+",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                //Node : number
                $('#lissSyntax').jstree().create_node(data.node.children[0],  {
                    "id" : "number"+num, "text" : "number",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSetDefinition.test(data.node.id)){
            if(data.node.children.length<3){
                var tab = data.node.a_attr.tab;
                //Node : {
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open"+num, "text": "{",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "{","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : set_initialization
                $('#lissSyntax').jstree().create_node(data.node,  {
                    "id" : "set_initialization"+num, "text" : "set_initialization",
                    state       : {
                        opened    : false,  // is the node open
                        disabled  : false,  // is the node disabled
                    }, a_attr : { "class" : "non-terminal","program":"undefined","tab":tab}
                }, "last", function(){});
                num++;

                //Node : }
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close"+num, "text": "}",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "}","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSetInitialization.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternExpression.test(data.node.id)){
            if(data.node.children.length < 1) {
                var tab = data.node.a_attr.tab;
                //Node : single_expressions{1,2}
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "single_expressions" + num, "text": "single_expressions{1,2}",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : single_expression
                $('#lissSyntax').jstree().create_node(data.node.children, {
                    "id": "single_expression" + num, "text": "single_expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSingleExpressions.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternSingleExpression.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : terms+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "terms" + num, "text": "terms+",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : term
                $('#lissSyntax').jstree().create_node(data.node.children, {
                    "id": "term" + num, "text": "term",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternRelOp.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternTerms.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternTerm.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : factors+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "factors" + num, "text": "factors+",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : factor
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "factor" + num, "text": "factor",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
                //liss.debugger("WOOT");
            }
        }else if(patternAddOp.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternFactors.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternMulOp.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternFactor.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternVariable.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                liss.debugger("TAB_DESIGNATOR: "+tab);
                //Node : identifier
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier"+num, "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined","tab":tab,"expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;

                //Node : array_access
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "array_access" + num, "text": "array_access",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":" undefined","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternArrayAccess.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternElemArray.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : single_expression+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "single_expressions" + num, "text": "single_expressions+",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : single_expression+
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "single_expression" + num, "text": "single_expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternFunctionCall.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;

                //Node : identifier
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier" + num, "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined","tab":tab,"expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal","tab":0,"program":"("}
                }, "last", function () {
                });
                num++;

                //Node : sub_prg_args
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "sub_prg_args" + num, "text": "sub_prg_args",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program":")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSubPrgArgs.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternArgs.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : expressions+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expressions" + num, "text": "expressions+",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : expressions
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternExpressions.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternSpecialFunctions.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternTailFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : tail
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "tail" + num, "text": "tail",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "tail","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternHeadFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : head
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "head" + num, "text": "head",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "head","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternConsFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : cons
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "cons" + num, "text": "cons",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "cons","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : ,
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "comma" + num, "text": ",",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ",","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternMemberFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : is_member
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "is_member" + num, "text": "isMember",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "isMember","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : ,
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "comma" + num, "text": ",",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ",","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : identifier
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier"+num, "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined","tab":0, "expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternIsEmptyFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : is_empty
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "is_empty" + num, "text": "isEmpty",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "isEmpty","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternLengthFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : length
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "length" + num, "text": "length",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "length","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternDeleteFunction.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;
                //Node : delete
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "delete" + num, "text": "del",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "del","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : ,
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "comma" + num, "text": ",",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ",","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternSubprogramsDefinitions.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternSubprogramDefinition.test(data.node.id)){
            if(data.node.children.length<1){
                var nodeParent = $("#lissSyntax").jstree(this).get_node(data.node.parent);
                var positionNodeInParent = function(nodeParent,node){
                    var res=-1;
                    for(var i=0; i < nodeParent.children.length;i++){
                        if(nodeParent.children[i]===data.node.id){res=i;}
                    }
                    return res;
                };
                var position = positionNodeInParent(nodeParent,data.node);
                var tab = data.node.a_attr.tab;

                //Node : subprogram
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "subprogram" + num, "text": "subprogram",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "subprogram ","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : identifier
                /*$('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier"+num, "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined","tab":0, "expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;*/

                //Node : name
                $('#lissSyntax').jstree().create_node(data.node,{
                    "id":"name"+num, "text": "name",
                    state:{
                        opened: true,
                        disabled: false,
                    }, a_attr:{"class":"non-terminal","program":"undefined","tab":tab}
                },"last",function(){
                });
                num++;

                //Node : (
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open" + num, "text": "(",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : "(","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : formal_args
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "formal_args" + num, "text": "formal_args",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : )
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close" + num, "text": ")",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program" : ")","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : return_type
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "return_type" + num, "text": "return_type",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : f_body
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "f_body" + num, "text": "f_body",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":" undefined\n","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternFormalArgs.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternFArgs.test(data.node.id)){
            if(data.node.children.length<1){
                var tab = data.node.a_attr.tab;
                //Node : formals_args+
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "formals_args" + num, "text": "formals_args+",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : formal_arg
                $('#lissSyntax').jstree().create_node(data.node.children[0], {
                    "id": "formal_arg" + num, "text": "formal_arg",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_all", $("#" + data.node.id));

            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternFormalsArgs.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternFormalArg.test(data.node.id)){
            if(data.node.children.length<1){
                var tab = data.node.a_attr.tab;

                //Node : identifier
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "identifier"+num, "text": "IDENTIFIER",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "terminal edit", "program": "undefined", "tab":tab,"expressionregularrule": "ID"}
                }, "last", function () {
                });
                num++;

                //Node : ->
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "type" + num, "text": "->",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal","program":"->","tab":tab}
                }, "last", function () {
                });
                num++;

                //Node : type
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "type" + num, "text": "type",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab":tab}
                }, "last", function () {
                });
                num++;

                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternReturnType.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternTypeReturnSubProgram.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternFBody.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab+1;

                //Node : {
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_open"+num, "text": "{",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "{\n","tab":0}
                }, "last", function () {
                });
                num++;

                //Node : declarations_t
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "declarations_f_body"+num, "text": "declarations",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "declarations\n","tab":tab}
                }, "last", function () {
                });
                num++

                //Node : declarations_nt
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "declarations" + num, "text": "declarations",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":produceTabs(tab+1)+"undefined\n", "tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : statements_t
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "statements_f_body"+num, "text": "statements",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": "statements\n","tab":tab}
                }, "last", function () {
                });
                num++

                //Node : statements_nt
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "statements" + num, "text": "statements",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program": produceTabs(tab+1)+"undefined\n","tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : return_subprogram
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "return_subprogram" + num, "text": "return_subprogram",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program": produceTabs(tab)+"undefined\n","tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : }
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "parenthesis_close"+num, "text": "}",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "program": produceTabs(data.node.a_attr.tab)+"}\n"}
                }, "last", function () {
                });
                num++;

                //Instruction for opening the branch
                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternReturnSubProgram.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternStatements.test(data.node.id)){
            if(data.node.children.length<1){
                var tab = data.node.a_attr.tab+1;

                //Node : statement*
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "multiple_statement" + num, "text": "statement*",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal", "program":"","tab" : tab}
                }, "last", function () {
                });
                num++;

                //Instruction for opening the branch
                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }else if(patternMultipleStatement.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternStatement.test(data.node.id)){
            setTimeout(function () {
                data.instance.show_contextmenu(data.node)
            }, 100);
        }else if(patternAssignment.test(data.node.id)){
            if(data.node.children.length < 1){
                var tab = data.node.a_attr.tab;

                console.log(data.node);
                liss.debugger("TAB_ASSIGNMENT: "+data.node.a_attr.tab);

                //Node : variable
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "variable" + num, "text": "variable",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":produceTabs(tab)+"undefined", "tab" : tab}
                }, "last", function () {
                });
                num++;

                //Node : equal
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "equal" + num, "text": "=",
                    state: {
                        opened: false,  // is the node open
                        disabled: true,  // is the node disabled
                    }, a_attr: {"class": "terminal", "tab" : 0, "program":"="}
                }, "last", function () {
                });
                num++;

                //Node : expression
                $('#lissSyntax').jstree().create_node(data.node, {
                    "id": "expression" + num, "text": "expression",
                    state: {
                        opened: false,  // is the node open
                        disabled: false,  // is the node disabled
                    }, a_attr: {"class": "non-terminal","program":"undefined","tab" : 0}
                }, "last", function () {
                });
                num++;

                //Instruction for opening the branch
                $("#lissSyntax").jstree("open_node", $("#" + data.node.id));
                liss.setText(getProgramLissBeta());
            }else{
                setTimeout(function () {
                    data.instance.show_contextmenu(data.node)
                }, 100);
            }
        }
    });
    
    //Code for ContextMenu to open with left click
    /*setTimeout(function () {
     data.instance.show_contextmenu(data.node)
     }, 100);*/
</script>
</body>
</html>